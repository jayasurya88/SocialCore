
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Social Media Clone</title>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v2.1.6/css/unicons.css">
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Qwitcher+Grypen:wght@400;700&display=swap" rel="stylesheet">
    <style>
        .log{
            font-family: "Qwitcher Grypen", cursive;
            font-weight: 700;
            font-style: normal;
            font-size: 40px;
        }
    </style>
</head>
<body>
    <nav>
        <div class="container">
            <h2 class="log">SocialCore</h2>
            <div class="search-bar">
                <form method="GET" action="{% url 'user_search' %}" style="display: inline;">
                    <i class="uil uil-search"></i>
                    <input type="search" name="q" placeholder="search for creators, inspirations, and projects">
                </form>
            </div>
            
            <div class="create d-flex align-items-center mb-3">
                <a href="{% url 'my_profile_view' user.username %}" class="profile-photo me-2">
                    <img src="{{ user.profile_picture.url }}" alt="User Profile Picture" style="width: 40px; height: 40px; border-radius: 50%;">
                </a>
                <a href="{% url 'create_post' %}" class="btn btn-primary">Create New Post</a>
            
                {% if user.is_authenticated %}
                <form method="POST" action="{% url 'custom_logout' %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary">Logout</button>
                </form>
            {% endif %}
            
            </div>
            
        </div>
    </nav>

    <!-- Main section -->

    <main>
        <div class="container">
            <div class="left">
                <a class="profile">
                    <div class="profile-photo">
                        <img src="{{ user.profile_picture.url }}" alt="">
                    </div>
                    <div class="handle">
                        <h4>{{ user.get_full_name }}</h4>
                        <p class="text-muted">@{{ user.username }}</p>
                    </div>
                </a>
                <!-- Sidebar -->
                <div class="sidebar">
                    <a class="menu-item active">
                        <span><i class="uil uil-home"></i></span><h3>Home</h3> 
                    </a>
                    <a class="menu-item">
                        <span><i class="uil uil-compass"></i></span><h3>Explore</h3>
                    </a>
                    <a class="menu-item" id="Notifications" href="{% url 'notifications' %}">
                        <span><i class="uil uil-bell"><small class="notification-count">{{ notifications.count }}</small></i></span>
                        <h3>Notifications</h3>
                        <!-- Notification popup -->
                        <div class="notifications-popup">
                            {% for notification in notifications %}
                                <div>
                                    <div class="profile-photo">
                                        <img src="{{ notification.from_user.profile_picture.url }}" alt="pic">
                                    </div>
                                    <div class="notification-body">
                                        <b>{{ notification.from_user.username }}</b>
                                        {% if notification.notification_type == 'friend_request' %}
                                            accepted your friend request
                                        {% elif notification.notification_type == 'comment' %}
                                            commented on your post
                                        {% elif notification.notification_type == 'like' %}
                                            liked your post
                                        {% endif %}
                                        <small class="text-muted">{{ notification.created_at|timesince }} AGO</small>
                                    </div>
                                </div>
                            {% empty %}
                                <div>No notifications available.</div>
                            {% endfor %}
                        </div>
                    </a>
                    <a class="menu-item" id="messages-notifications">
                        <span><i class="uil uil-envelope"><small class="notification-count" id="Messages-count">6</small></i></span><h3>Messages</h3>
                    </a>
                    <a class="menu-item">
                        <span><i class="uil uil-bookmark"></i></span><h3>Bookmarks</h3>
                    </a>
                    <a class="menu-item">
                        <span><i class="uil uil-chart-line"></i></span><h3>Analytics</h3>
                    </a>
                    <a class="menu-item" id="theme">
                        <span><i class="uil uil-palette"></i></span><h3>Theme</h3>
                    </a>
                    <a class="menu-item"  href="{% url 'privacy_settings' %}">
                        
                        <span><i class="uil uil-setting"></i></span><h3>Settings</h3>
                    </a>      
                </div>
                <label for="create-post" class="btn btn-primary">Create Post</label>
            </div>
            <!-- End of Left -->

            <div class="middle">
                
                <form class="create-post">
                    <div class="profile-photo">
                        <img src="{{ user.profile_picture.url }}" alt="">
                    </div>
                    <input type="text" placeholder="what's on your mind, Diana?" id="create-post">
                    <input type="submit" value="post" class="btn btn-primary">
                </form>
                
                <!-- Feeds -->
                <div class="feeds">
                    
                    <div class="feed">
                        {% for post in posts %}
                            <div class="head">
                                <div class="user">
                                    <div class="profile-photo">
                                        {% if post.user.profile_picture %}
                                            <img src="{{ post.user.profile_picture.url }}" alt="Profile picture">
                                        {% else %}
                                            <img src="{% static 'images/profile-13.jpg' %}" alt="Default Profile picture">
                                        {% endif %}
                                    </div>
                                    <div class="info">
                                        <h3>{{ post.user.username }}</h3>
                                        <small>{{ post.location }}, {{ post.created_at|timesince }} ago</small>
                                    </div>
                                </div>
                                <span class="edit">
                                    <i class="uil uil-ellipsis-h"></i>
                                </span>
                            </div>
                    
                            <div class="photo">
                                {% if post.image %}
                                <img src="{{ post.image.url }}" alt="Post image" style="width: 100%; height:400px; object-fit: cover;">
                                {% else %}
                                    <img src="{% static 'images/feed-1.jpg' %}" alt="Default Post image">
                                {% endif %}
                            </div>
                    
                            <div class="action-buttons">
                                <div class="interaction-buttons">
                                    <a href="{% url 'like_post' post.id %}">
                                        {% if request.user in post.likes.all %}
                                            <span><i class="uil uil-heart"></i></span>
                                        {% else %}
                                            <span><i class="uil uil-heart"></i></span>
                                        {% endif %}
                                    </a>
                                    <span><i class="uil uil-comment-dots"></i></span>
                                    <span><i class="uil uil-share-alt"></i></span>
                                </div>
                                <div class="bookmark">
                                    <span><i class="uil uil-bookmark-full"></i></span>
                                </div>
                            </div>
                    
                            <div class="liked-by">
                                {% for like in post.likes.all|slice:":3" %}
                                    <span><img src="{{ like.profile_picture.url }}"></span>
                                {% endfor %}
                                <p>Liked by <b>{{ post.likes.first.username }}</b> and <b>{{ post.likes.count }} others</b></p>
                            </div>
                    
                            <div class="caption">
                                <p><b>{{ post.user.username }}</b> {{ post.caption }} <span class="harsh-tag">#lifestyle</span></p>
                            </div>
                    
                            <div class="comments text-muted">
                                <h3>Comments</h3>
                                <form method="post" action="{% url 'add_comment' post.id %}">
                                    {% csrf_token %}
                                    <textarea name="comment" rows="3" cols="50" placeholder="Add a comment..."></textarea><br><br>
                                    <button type="submit">Add Comment</button>
                                </form>
                    
                                <ul>
                                    {% for comment in post.comments.all %}
                                        <li>{{ comment.user.username }}: {{ comment.text }} ({{ comment.created_at }})</li>
                                    {% empty %}
                                        <li>No comments yet.</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            <hr> <!-- Optional: Separator between posts -->
                        {% empty %}
                            <p>No posts available.</p>
                        {% endfor %}
                    </div>
                    

                    <div class="feed">
                        <div class="head">
                            <div class="user">
                                <div class="profile-photo">
                                    <img src="{% static 'images/profile-14.jpg' %}" alt="pic">
                                </div>
                                <div class="info">
                                    <h3>Kumar Boss</h3>
                                    <small>Goa, 35 MINUTES AGO</small>
                                </div>
                            </div>
                            <span class="edit">
                                <i class="uil uil-ellipsis-h"></i>
                            </span>
                        </div>

                        <div class="photo">
                            <img src="{% static 'images/feed-2.jpg' %}">
                        </div>

                        <div class="action-buttons">
                            <div class="interaction-buttons">
                                <span><i class="uil uil-heart"></i></span>
                                <span><i class="uil uil-comment-dots"></i></span>
                                <span><i class="uil uil-share-alt"></i></span>
                            </div>
                            <div class="bookmark">
                                <span><i class="uil uil-bookmark-full"></i></span>
                            </div>
                        </div>

                        <div class="liked-by">
                            <span><img src="{% static 'images/profile-12.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-14.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-10.jpg' %}"></span>
                            <p>liked-by <b>Lana Rose</b> and <b>5,15 others</b></p>
                        </div>
                        <div class="caption">
                            <p><b>Kumar Boss</b> Another good day with myself  <span class="harsh-tag">#glass</span></p>
                        </div>
                        <div class="comments text-muted">View all 52 comments</div>
                    </div>

                    <div class="feed">
                        <div class="head">
                            <div class="user">
                                <div class="profile-photo">
                                    <img src="{% static 'images/profile-2.jpg' %}" alt="pic">
                                </div>
                                <div class="info">
                                    <h3>Jasmin Roy</h3>
                                    <small>Mumbai, 1 HOUR AGO</small>
                                </div>
                            </div>
                            <span class="edit">
                                <i class="uil uil-ellipsis-h"></i>
                            </span>
                        </div>

                        <div class="photo">
                            <img src="{% static 'images/feed-3.jpg' %}">
                        </div>

                        <div class="action-buttons">
                            <div class="interaction-buttons">
                                <span><i class="uil uil-heart"></i></span>
                                <span><i class="uil uil-comment-dots"></i></span>
                                <span><i class="uil uil-share-alt"></i></span>
                            </div>
                            <div class="bookmark">
                                <span><i class="uil uil-bookmark-full"></i></span>
                            </div>
                        </div>

                        <div class="liked-by">
                            <span><img src="{% static 'images/profile-5.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-6.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-7.jpg' %}"></span>
                            <p>liked-by <b>Milan Saron</b> and <b>1,303 others</b></p>
                        </div>
                        <div class="caption">
                            <p><b>Jasmin Roy</b> Happy Life is the best <span class="harsh-tag">#flower</span></p>
                        </div>
                        <div class="comments text-muted">View all 177 comments</div>
                    </div>

                    <div class="feed">
                        <div class="head">
                            <div class="user">
                                <div class="profile-photo">
                                    <img src="{% static 'images/profile-16.jpg' %}" alt="pic">
                                </div>
                                <div class="info">
                                    <h3>Mrinal Santos</h3>
                                    <small>Dubai, 25 MINUTES AGO</small>
                                </div>
                            </div>
                            <span class="edit">
                                <i class="uil uil-ellipsis-h"></i>
                            </span>
                        </div>

                        <div class="photo">
                            <img src="{% static 'images/feed-4.jpg' %}">
                        </div>

                        <div class="action-buttons">
                            <div class="interaction-buttons">
                                <span><i class="uil uil-heart"></i></span>
                                <span><i class="uil uil-comment-dots"></i></span>
                                <span><i class="uil uil-share-alt"></i></span>
                            </div>
                            <div class="bookmark">
                                <span><i class="uil uil-bookmark-full"></i></span>
                            </div>
                        </div>

                        <div class="liked-by">
                            <span><img src="{% static 'images/profile-10.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-4.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-15.jpg' %}"></span>
                            <p>liked-by <b>Ernest Achiver</b> and <b>2,023 others</b></p>
                        </div>
                        <div class="caption">
                            <p><b>Mrinal Santos</b> Beautifull pic of my friends. <span class="harsh-tag">#friend</span></p>
                        </div>
                        <div class="comments text-muted">View all 270 comments</div>
                    </div>

                    <div class="feed">
                        <div class="head">
                            <div class="user">
                                <div class="profile-photo">
                                    <img src="{% static 'images/profile-17.jpg' %}" alt="pic">
                                </div>
                                <div class="info">
                                    <h3>Samoli Das</h3>
                                    <small>Kolkata, 50 MINUTES AGO</small>
                                </div>
                            </div>
                            <span class="edit">
                                <i class="uil uil-ellipsis-h"></i>
                            </span>
                        </div>

                        <div class="photo">
                            <img src="{% static 'images/feed-6.jpg' %}">
                        </div>

                        <div class="action-buttons">
                            <div class="interaction-buttons">
                                <span><i class="uil uil-heart"></i></span>
                                <span><i class="uil uil-comment-dots"></i></span>
                                <span><i class="uil uil-share-alt"></i></span>
                            </div>
                            <div class="bookmark">
                                <span><i class="uil uil-bookmark-full"></i></span>
                            </div>
                        </div>

                        <div class="liked-by">
                            <span><img src="{% static 'images/profile-10.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-12.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-5.jpg' %}"></span>
                            <p>liked-by <b>Ernest Achiver</b> and <b>1,123 others</b></p>
                        </div>
                        <div class="caption">
                            <p><b>Samoli Das</b> A busy day... <span class="harsh-tag">#lifestyle</span></p>
                        </div>
                        <div class="comments text-muted">View all 717 comments</div>
                    </div>

                    <div class="feed">
                        <div class="head">
                            <div class="user">
                                <div class="profile-photo">
                                    <img src="{% static 'images/profile-18.jpg' %}" alt="pic">
                                </div>
                                <div class="info">
                                    <h3>Rohon Roy</h3>
                                    <small>Dubai, 55 MINUTES AGO</small>
                                </div>
                            </div>
                            <span class="edit">
                                <i class="uil uil-ellipsis-h"></i>
                            </span>
                        </div>

                        <div class="photo">
                            <img src="{% static 'images/feed-7.jpg' %}">
                        </div>

                        <div class="action-buttons">
                            <div class="interaction-buttons">
                                <span><i class="uil uil-heart"></i></span>
                                <span><i class="uil uil-comment-dots"></i></span>
                                <span><i class="uil uil-share-alt"></i></span>
                            </div>
                            <div class="bookmark">
                                <span><i class="uil uil-bookmark-full"></i></span>
                            </div>
                        </div>

                        <div class="liked-by">
                            <span><img src="{% static 'images/profile-5.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-4.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-1.jpg' %}"></span>
                            <p>liked-by <b>Ernest Achiver</b> and <b>2,323 others</b></p>
                        </div>
                        <div class="caption">
                            <p><b>Rohon Roy</b> My Beautifull sister <span class="harsh-tag">#sister</span></p>
                        </div>
                        <div class="comments text-muted">View all 555 comments</div>
                    </div>

                    <div class="feed">
                        <div class="head">
                            <div class="user">
                                <div class="profile-photo">
                                    <img src="{% static 'images/profile-19.jpg' %}" alt="pic">
                                </div>
                                <div class="info">
                                    <h3>Bhola Rose</h3>
                                    <small>Dubai, 15 MINUTES AGO</small>
                                </div>
                            </div>
                            <span class="edit">
                                <i class="uil uil-ellipsis-h"></i>
                            </span>
                        </div>

                        <div class="photo">
                            <img src="{% static 'images/feed-5.jpg' %}">
                        </div>

                        <div class="action-buttons">
                            <div class="interaction-buttons">
                                <span><i class="uil uil-heart"></i></span>
                                <span><i class="uil uil-comment-dots"></i></span>
                                <span><i class="uil uil-share-alt"></i></span>
                            </div>
                            <div class="bookmark">
                                <span><i class="uil uil-bookmark-full"></i></span>
                            </div>
                        </div>

                        <div class="liked-by">
                            <span><img src="{% static 'images/profile-10.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-4.jpg' %}"></span>
                            <span><img src="{% static 'images/profile-1.jpg' %}"></span>
                            <p>liked-by <b>You</b> and <b>2,323 others</b></p>
                        </div>
                        <div class="caption">
                            <p><b>Bhola Rose</b> Beautifull pic of pic <span class="harsh-tag">#lifestyle</span></p>
                        </div>
                        <div class="comments text-muted">View all 277 comments</div>
                    </div>
                </div>

            </div>

            <div class="right">
                <div class="messages">
                    <div class="heading">
                        <h4>Messages</h4><i class="uil uil-edit"></i>
                    </div>
                    <!-- search bar -->
                    <div class="search-bar">
                        <i class="uil uil-search"></i>
                        <input type="search" placeholder="Search messages" id="message-search">
                    </div>
                    <!-- messages category -->
                    <div class="category">
                        <h6 class="active">Primary</h6>
                        <h6 class="messages-requests">General</h6>
                        <h6 class="messages-requests">Requests(7)</h6>
                    </div>
                    <!-- message -->
                    <div class="message">
                        <div class="profile-photo">
                            <img src="{% static 'images/profile-17.jpg' %}" >
                        </div>
                        <div class="message-body">
                            <h5>Edem Quist</h5>
                            <p class="text-muted">Just woke up bruh</p>
                        </div>
                    </div>
                    <!-- message -->
                    <div class="message">
                        <div class="profile-photo">
                            <img src="{% static 'images/profile-3.jpg' %}" >
                        </div>
                        <div class="message-body">
                            <h5>France Deila</h5>
                            <p class="text-muted">Recived bruh, thanks</p>
                        </div>
                    </div>
                    <!-- message -->
                    <div class="message">
                        <div class="profile-photo">
                            <img src="{% static 'images/profile-4.jpg' %}" >
                            <div class="active"></div>
                        </div>
                        <div class="message-body">
                            <h5>Jane Doe</h5>
                            <p class="text-muted">Ok</p>
                        </div>
                    </div>
                    <!-- message -->
                    <div class="message">
                        <div class="profile-photo">
                            <img src="{% static 'images/profile-5.jpg' %}" >
                        </div>
                        <div class="message-body">
                            <h5>Daniel Jakson</h5>
                            <p class="text-muted">2 new messages</p>
                        </div>
                    </div>
                    <!-- message -->
                    <div class="message">
                        <div class="profile-photo">
                            <img src="{% static 'images/profile-6.jpg' %}" >
                        </div>
                        <div class="message-body">
                            <h5>Justin Heoi</h5>
                            <p class="text-muted">Lol u right</p>
                        </div>
                    </div>
                    <!-- message -->
                    <div class="message">
                        <div class="profile-photo">
                            <img src="{% static 'images/profile-7.jpg' %}" >
                            <div class="active"></div>
                        </div>
                        <div class="message-body">
                            <h5>Chantel Msiza</h5>
                            <p class="text-muted">Birthday Tomorrow!</p>
                        </div>
                    </div>
                </div>
                <!-- End of Message -->

                <!-- friend request -->
                <div class="friend-requests">
                    <h4>Requests</h4>
                    <div class="request">
                        <div class="info">
                            <div class="profile-photo">
                                <img src="{% static 'images/profile-12.jpg' %}" >
                            </div>
                            <div>
                                <h5>Hajia Bintu</h5>
                                <p class="text-muted">5 mutual friends</p>
                            </div>
                        </div>
                        <div class="action">
                            <button class="btn btn-primary">Accept</button>
                            <button class="btn">Decline</button>
                        </div>
                    </div>
                    <div class="request">
                        <div class="info">
                            <div class="profile-photo">
                                <img src="{% static 'images/profile-19.jpg' %}" >
                            </div>
                            <div>
                                <h5>Jakline Mensa</h5>
                                <p class="text-muted">8 mutual friends</p>
                            </div>
                        </div>
                        <div class="action">
                            <button class="btn btn-primary">Accept</button>
                            <button class="btn">Decline</button>
                        </div>
                    </div>
                    <div class="request">
                        <div class="info">
                            <div class="profile-photo">
                                <img src="{% static 'images/profile-20.jpg' %}" >
                            </div>
                            <div>
                                <h5>Mohou Sanol</h5>
                                <p class="text-muted">3 mutual friends</p>
                            </div>
                        </div>
                        <div class="action">
                            <button class="btn btn-primary">Accept</button>
                            <button class="btn">Decline</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Theme Customization -->

    <div class="customize-theme">
        <div class="card">
            <h2>Customize your view</h2>
            <p class="text-muted">Manage your font size, color, and background.</p>

            <!-- Font sizes -->

            <div class="font-size">
                <h4>Font Size</h4>
                <div>
                    <h6>Aa</h6>
                    <div class="choose-size">
                        <span class="font-size-1"></span>
                        <span class="font-size-2 active"></span>
                        <span class="font-size-3"></span>
                        <span class="font-size-4"></span>
                        <span class="font-size-5"></span>
                    </div>
                    <h3>Aa</h3>
                </div>
            </div>

            <!-- Primary colors -->
            <div class="color">
                <h4>Color</h4>
                <div class="choose-color">
                    <span class="color-1 active"></span>
                    <span class="color-2"></span>
                    <span class="color-3"></span>
                    <span class="color-4"></span>
                    <span class="color-5"></span>
                </div>
            </div>

            <!-- Background colors -->
            <div class="background">
                <h4>Background</h4>
                <div class="choose-bg">
                    <div class="bg-1 active">
                        <span></span>
                        <h5 for="bg-1">Light</h5>
                    </div>
                    <div class="bg-2">
                        <span></span>
                        <h5>Dim</h5> <!--  for="bg-2" -->
                    </div>
                    <div class="bg-3">
                        <span></span>
                        <h5 for="bg-3">Lights out</h5>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="{% static 'main.js' %}"></script>
</body>
</html>